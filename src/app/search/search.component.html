<div class="main-container" [formGroup]="form">
  <!-- Filter panel -->
  <aside class="filter-panel">
    <h3>Filter</h3>

    <label for="city">City</label>
    <input type="text" id="city" formControlName="city" />

    <label for="street">Street</label>
    <input type="text" id="street" formControlName="street" />

    <label>Price Range</label>
    <div class="range-group">
      <input type="number" placeholder="Min" formControlName="priceMin" />
      <span>to</span>
      <input type="number" placeholder="Max" formControlName="priceMax" />
    </div>

    <label>Building Area</label>
    <div class="range-group">
      <input type="number" placeholder="Min" formControlName="areaMin" />
      <span>to</span>
      <input type="number" placeholder="Max" formControlName="areaMax" />
    </div>

    <button type="button" (click)="applyFilters()">Apply</button>
  </aside>

  <!-- Results -->
  <section class="content">
    <div class="sort-bar">
      Sorted by
      <button type="button" (click)="sortBy('priceAsc')">Price ↑</button>
      <button type="button" (click)="sortBy('priceDesc')">Price ↓</button>
      <span class="sep">|</span>
      <button type="button" (click)="sortBy('cityAsc')">City A–Z</button>
      <button type="button" (click)="sortBy('cityDesc')">City Z–A</button>
      <span class="sep">|</span>
      <button type="button" (click)="sortBy('areaAsc')">Area ↑</button>
      <button type="button" (click)="sortBy('areaDesc')">Area ↓</button>
    </div>

    <div class="flat-grid">
      <div class="flat-card" *ngFor="let f of view" (click)="toView(f.id!)">
        <div class="image-container">
          <img
            [src]="f.image || 'assets/placeholder.jpg'"
            [alt]="f.title || (f.city + ' ' + f.streetName)"
          />
          <div
            class="favorite-icon"
            [attr.aria-pressed]="isFav(f.id)"
            (click)="toggleFav($event, f.id)"
          >
            <img src="assets/favorite.svg" width="20" height="20" alt="favorite" />
          </div>
        </div>

        <div class="info">
          <h4>{{ f.title || (f.city + ' · ' + f.streetName) }}</h4>
          <div class="location">
            <img src="assets/location.svg" alt="location" />
            {{ f.streetName }}, {{ f.city }}
          </div>
          <div class="price">
            {{ f.rentPrice | currency:'USD':'symbol':'1.0-0' }}
            <span>/month</span>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
